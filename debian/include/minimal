ifelse(DEBIANVERSION, `unstable', `define(`WITH_BACKPORTS', `')', `define(`WITH_BACKPORTS', `-t bullseye-backports')')

ifelse(DEBIANVERSION, `unstable', include(unstable-minimal), include(stable-minimal))
ifelse(DEBIANVERSION, `unstable', `define(`LIBCPP_DEV', `libc++-dev')', `define(`LIBCPP_DEV', `libc++-dev')')
ifelse(DEBIANVERSION, `unstable', `define(`JDK', `openjdk-11-jdk')', `define(`JDK', `openjdk-11-jdk')')
ifelse(DEBIANVERSION, `unstable', `define(`LIBLAPACKE_DEV', `')', `define(`LIBLAPACKE_DEV', `liblapacke-dev')')

ENV DEBIAN_FRONTEND=noninteractive \
    DXT_LIBCLANG_SO=/usr/lib/llvm-${CLANG_VERSION}/lib/libclang.so.1 \
    CCACHE_COMPILERCHECK=content \
    CCACHE_COMPRESS=true

include(mold)